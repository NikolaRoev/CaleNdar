#pragma once
#include "pch.h"
#include "..\Structures\Structures.h"
#include "..\Core\Core.h"

//================================================================================================================================
//================================================================================================================================
//================================================================================================================================

namespace cn {

	//================================================================================================================================

	struct EventDate {
		int year;
		int month;
		int day;

		int start_time;
	};

	//================================================================================================================================

	struct EventSorter {
		bool operator()(const EventDate& left, const EventDate& right) const {
			if (left.year < right.year) {
				return left.year < right.year;
			}
			else if (left.month < right.month) {
				return left.month < right.month;
			}
			else if (left.day < right.day) {
				return left.day < right.day;
			}
			else {
				return left.start_time < right.start_time;
			}
		}
	};

	//================================================================================================================================

	struct MonthSelectionMenu {
		Image* background;
		Label* time;
		Button* arrow_left;
		Label* year;
		Button* arrow_right;
		TextButton* today;
		std::array<TextButton*, 12> month_buttons;
	};

	//================================================================================================================================

	struct DaySelectionMenu {

	};

	//================================================================================================================================

	struct EventSelectionMenu {

	};

	//================================================================================================================================

	struct IndividualEvent {

	};

	//================================================================================================================================

	struct YearDrawables {
		MonthSelectionMenu* months_menu;
		std::array<DaySelectionMenu*, 12> days_menu;
		std::array<EventSelectionMenu*, 366> events_menu;
		
		std::map<EventDate, IndividualEvent*, EventSorter> events;
	};

	//================================================================================================================================

}

//================================================================================================================================
//================================================================================================================================
//================================================================================================================================

class Manager {
private:

public:
	Core* core;

	std::unordered_map<int, cn::YearDrawables> preloaded_years;



	void preload_year(const int _year);

};

//================================================================================================================================
//================================================================================================================================
//================================================================================================================================